<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Preferences | Weekplan.ai</title>
<link rel="stylesheet" href="/styles.css" />
<style>
  :root{
    --bg:#f7fafc;
    --card:#ffffff;
    --ink:#0f172a;
    --muted:#6b7280;
    --blue:#2563eb;         /* primary blue */
    --blue-2:#1d4ed8;       /* darker hover */
    --ring:rgba(37,99,235,.15);
    --line:#e5e7eb;
  }
  html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font:16px/1.45 Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  .center{min-height:100%;display:grid;place-items:center;padding:18px}
  .hero{max-width:680px;text-align:center}
  .brand{display:flex;gap:8px;justify-content:center;align-items:center;margin-bottom:6px;color:#111}
  .brand .dot{width:12px;height:12px;border-radius:999px;background:linear-gradient(135deg,#60a5fa,#34d399)}
  h1{margin:.2rem 0 0;font-size:34px;letter-spacing:-.02em}
  p.sub{margin:.4rem 0 1.2rem;color:var(--muted)}

  .btn{
    border:0;cursor:pointer;border-radius:14px;
    font-weight:800;padding:16px 22px;box-shadow:0 10px 26px var(--ring);
    background:linear-gradient(135deg,#60a5fa,#2563eb);color:#fff;
  }
  .btn:active{transform:translateY(1px)}
  .link{margin-top:10px;color:#2563eb;text-decoration:underline;cursor:pointer;font-size:.95rem}

  /* Modal (bright) */
  dialog{width:100%;max-width:680px;border:0;padding:0;margin:0 auto;background:transparent}
  dialog::backdrop{background:rgba(0,0,0,.25)}
  .sheet{
    background:var(--card);border:1px solid var(--line);border-radius:18px;
    box-shadow:0 24px 60px rgba(0,0,0,.12);
    overflow:hidden;
  }
  .hd{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid var(--line)}
  .title{font-weight:900}
  .close{border:1px solid var(--line);background:#fff;color:var(--ink);border-radius:10px;padding:8px 10px;cursor:pointer}
  .bd{padding:14px 16px}
  .muted{color:var(--muted)}

  textarea,input,select{
    width:100%;background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px;outline:none;
  }
  textarea::placeholder,input::placeholder{color:#94a3b8}

  /* quick checks */
  .checks{display:grid;gap:8px;margin-top:10px}
  .check{display:flex;align-items:center;gap:10px;background:#f8fafc;border:1px solid var(--line);padding:10px;border-radius:12px}

  .row{display:grid;gap:10px}
  .row.two{grid-template-columns:1fr 1fr}
  .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  .btn.alt{background:#eff6ff;color:#1e3a8a;border:1px solid #bfdbfe;box-shadow:none}
  .btn.slim{padding:10px 14px;border-radius:10px}

  /* Topic hub */
  .hub{display:grid;gap:10px}
  .tiles{display:grid;gap:10px;grid-template-columns:1fr 1fr}
  @media(min-width:640px){.tiles{grid-template-columns:1fr 1fr 1fr}}
  .tile{
    border:1px solid var(--line);border-radius:14px;background:#fff;padding:12px;cursor:pointer;
    display:flex;gap:10px;align-items:center;transition:box-shadow .12s ease, transform .06s ease;
  }
  .tile:hover{box-shadow:0 8px 22px var(--ring)}
  .tile:active{transform:translateY(1px)}
  .badge{margin-left:auto;background:#e0e7ff;color:#1e3a8a;border-radius:999px;padding:4px 8px;font-weight:700;font-size:.8rem}

  /* Topic panel (inline) */
  .panel{margin-top:12px;border:1px solid var(--line);border-radius:14px;padding:12px;background:#fff}
  .chips{display:flex;flex-wrap:wrap;gap:8px}
  .chip{border:1px solid var(--line);background:#f8fafc;color:#0f172a;border-radius:999px;padding:8px 12px;font-weight:700;cursor:pointer}
  .chip[aria-pressed="true"]{background:#e0f2fe;border-color:#93c5fd}
  .sl{margin-top:6px;color:var(--muted);font-size:.9rem}

  /* JSON peek */
  details.peek{margin-top:10px}
  .peek .box{font-family:ui-monospace,Menlo,Consolas,monospace;white-space:pre-wrap;background:#0b1220;color:#e8edf3;border-radius:12px;padding:12px;max-height:200px;overflow:auto}
</style>
</head>
<body>
<div class="center">
  <section class="hero">
    <div class="brand"><span class="dot"></span><strong>Weekplan.ai</strong></div>
    <h1>Ready to eat smarter?</h1>
    <p class="sub">Start with one note or choose a few preferences. You can keep it simple or go deepâ€”your call.</p>
    <button class="btn" id="getStarted">Get started</button>
    <div class="link" id="peekJSON">Preview JSON (for demo)</div>
  </section>
</div>

<!-- QUICK DIALOG -->
<dialog id="quick">
  <div class="sheet">
    <div class="hd">
      <div class="title">Quick start</div>
      <button class="close" data-close>Close</button>
    </div>
    <div class="bd">
      <label class="muted">Optional note</label>
      <textarea id="quickNote" placeholder="e.g., 20-min dinners â€¢ love Mediterranean â€¢ no mushrooms"></textarea>

      <div class="muted" style="margin-top:10px">Pick any (optional)</div>
      <div class="checks">
        <label class="check"><input type="checkbox" value="save_time"> Save time</label>
        <label class="check"><input type="checkbox" value="weight_loss"> Weight loss</label>
        <label class="check"><input type="checkbox" value="muscle_gain"> Muscle gain</label>
        <label class="check"><input type="checkbox" value="vegetarian"> Vegetarian focus</label>
        <label class="check"><input type="checkbox" value="budget_friendly"> Budget friendly</label>
      </div>

      <div class="actions">
        <button class="btn" id="doQuick">Create Plan</button>
        <button class="btn alt" id="openHub">Help me find my perfect food plan</button>
      </div>

      <details class="peek" id="quickPeek">
        <summary class="muted">JSON preview</summary>
        <div class="box" id="quickJSON">{ }</div>
      </details>
    </div>
  </div>
</dialog>

<!-- HUB / TOPIC DIALOG -->
<dialog id="hub">
  <div class="sheet">
    <div class="hd">
      <div class="title">Tweak what matters (optional)</div>
      <button class="close" data-close>Close</button>
    </div>
    <div class="bd hub">
      <p class="muted" style="margin:0">Choose a topic to adjust. You can do one or many, then tap <b>Done for now</b>.</p>

      <div class="tiles" id="tiles">
        <!-- tiles are injected -->
      </div>

      <div id="panel" class="panel" hidden>
        <!-- dynamic topic UI renders here -->
      </div>

      <div class="actions">
        <button class="btn slim alt" id="clearPanel">Back to topics</button>
        <button class="btn" id="finish">Done for now</button>
      </div>

      <details class="peek">
        <summary class="muted">JSON preview</summary>
        <div class="box" id="hubJSON">{ }</div>
      </details>
    </div>
  </div>
</dialog>

<script>
/* ---------- Minimal state + helpers ---------- */
const $ = s => document.querySelector(s);

let state = {
  profileVersion:1,
  quickNote:'',
  goals:[],
  dietary:{dietStyle:'omnivore',allergies:[],intolerances:[],avoid:[],mustInclude:[]},
  taste:{cuisines:[],spiceTolerance:5,allowDesserts:true,proteinPrefs:[]},
  mealRules:{focusMeals:'dinner',servingsPerRecipe:2,leftoversPolicy:'none',timePerDinnerMin:30,varietyLevel:7},
  skillBudget:{skillLevel:'beginner',budgetLevel:'medium',equipment:[]},
  meta:{device:'web',savedAt:null}
};

const PRESETS = {
  goals:['save_time','weight_loss','muscle_gain','enjoyment','learn_to_cook','consistency'],
  diet:['omnivore','vegetarian','vegan','pescatarian','flexitarian','keto','mediterranean'],
  allergies:['peanuts','lactose','gluten','shellfish','soy','eggs'],
  avoid:['mushrooms','olives','cilantro'],
  must:['chicken','rice','beans'],
  cuisines:['mediterranean','mexican','italian','indian','thai','japanese','nordic'],
  proteins:['chicken','fish','salmon','tofu','lentils','beans','eggs'],
  equipment:['stovetop','oven','microwave','air_fryer','slow_cooker','blender','pressure_cooker'],
  skill:['beginner','intermediate','advanced'],
  budget:['low','medium','high'],
  leftovers:['none','ok_for_lunch','prefer_leftovers'],
  servings:['1','2','4'],
  timeOpts:[{label:'â‰¤20 min',val:20},{label:'~30 min',val:30},{label:'45+ min',val:45}]
};

function exportObj(){
  return {
    profileVersion:1,
    quickNote: state.quickNote,
    goals:[...state.goals],
    dietary:{...state.dietary},
    taste:{...state.taste, allowDesserts: !!state.taste.allowDesserts},
    mealRules:{...state.mealRules},
    skillBudget:{...state.skillBudget},
    meta:{device:'web', savedAt:new Date().toISOString()}
  };
}
function updateJSON(){
  $('#quickJSON').textContent = JSON.stringify(exportObj(), null, 2);
  $('#hubJSON').textContent   = JSON.stringify(exportObj(), null, 2);
}

/* ---------- Landing ---------- */
$('#getStarted').onclick = () => $('#quick').showModal();
$('#peekJSON').onclick = () => alert(JSON.stringify(exportObj(), null, 2));
document.querySelectorAll('[data-close]').forEach(b=> b.onclick = e => e.target.closest('dialog').close());

/* ---------- Quick flow ---------- */
$('#doQuick').onclick = ()=>{
  const chosen = Array.from($('#quick').querySelectorAll('input[type="checkbox"]:checked')).map(x=>x.value);
  state.quickNote = $('#quickNote').value.trim();
  state.goals = chosen.filter(v=>['save_time','weight_loss','muscle_gain'].includes(v));
  if(chosen.includes('vegetarian')) state.dietary.dietStyle='vegetarian';
  if(chosen.includes('budget_friendly')) state.skillBudget.budgetLevel='low';
  updateJSON();
  $('#quickPeek').open = true;
  alert('Plan ready (demo).');
};
$('#openHub').onclick = ()=> {
  state.quickNote = $('#quickNote').value.trim();
  buildTiles();
  updateJSON();
  $('#hub').showModal();
};

/* ---------- Topic Hub ---------- */
const TOPICS = [
  {id:'goals', label:'Goals', emoji:'ðŸŽ¯'},
  {id:'diet', label:'Diet style', emoji:'ðŸ¥—'},
  {id:'allergies', label:'Allergies', emoji:'âš ï¸'},
  {id:'avoid', label:'Never show', emoji:'ðŸš«'},
  {id:'must', label:'Must include', emoji:'âœ…'},
  {id:'time', label:'Time per dinner', emoji:'â±ï¸'},
  {id:'variety', label:'Variety', emoji:'ðŸ”'},
  {id:'skill', label:'Skill', emoji:'ðŸ§‘â€ðŸ³'},
  {id:'budget', label:'Budget', emoji:'ðŸ’¸'},
  {id:'leftovers', label:'Leftovers', emoji:'ðŸ±'},
  {id:'servings', label:'Servings', emoji:'ðŸ½ï¸'},
  {id:'cuisines', label:'Cuisines', emoji:'ðŸœ'},
  {id:'spice', label:'Spice', emoji:'ðŸŒ¶ï¸'},
  {id:'dessert', label:'Desserts', emoji:'ðŸ¨'},
  {id:'proteins', label:'Proteins', emoji:'ðŸ—'},
  {id:'equipment', label:'Equipment', emoji:'ðŸ”§'}
];

function buildTiles(){
  const wrap = $('#tiles'); wrap.innerHTML = '';
  TOPICS.forEach(t=>{
    const tile = document.createElement('button');
    tile.type='button'; tile.className='tile';
    tile.innerHTML = `<span>${t.emoji}</span><span>${t.label}</span><span class="badge" id="b-${t.id}" hidden>Set</span>`;
    tile.onclick = ()=> openTopic(t.id);
    wrap.appendChild(tile);
  });
  refreshBadges();
  clearPanel();
}
function setBadge(id, on){ const b = $('#b-'+id); if(!b) return; b.hidden = !on; }
function refreshBadges(){
  setBadge('goals', state.goals.length>0);
  setBadge('diet', !!state.dietary.dietStyle && state.dietary.dietStyle!=='omnivore');
  setBadge('allergies', state.dietary.allergies.length>0);
  setBadge('avoid', state.dietary.avoid.length>0);
  setBadge('must', state.dietary.mustInclude.length>0);
  setBadge('time', !!state.mealRules.timePerDinnerMin && state.mealRules.timePerDinnerMin!==30);
  setBadge('variety', state.mealRules.varietyLevel!==7);
  setBadge('skill', state.skillBudget.skillLevel!=='beginner');
  setBadge('budget', state.skillBudget.budgetLevel!=='medium');
  setBadge('leftovers', state.mealRules.leftoversPolicy!=='none');
  setBadge('servings', state.mealRules.servingsPerRecipe!==2);
  setBadge('cuisines', state.taste.cuisines.length>0);
  setBadge('spice', state.taste.spiceTolerance!==5);
  setBadge('dessert', state.taste.allowDesserts===false);
  setBadge('proteins', state.taste.proteinPrefs.length>0);
  setBadge('equipment', state.skillBudget.equipment.length>0);
}

/* Chips helper */
function chipField(container, arr, preset, single=false, mapOut=v=>v){
  container.innerHTML='';
  const list=[...new Set([...(preset||[]), ...(arr||[])])];
  list.forEach(v=>{
    const b=document.createElement('button');
    b.type='button'; b.className='chip'; b.textContent=v.label||v;
    const isOn = single ? ( (arr && (arr===v || arr===mapOut(v))) ) : (arr||[]).includes(mapOut(v));
    b.setAttribute('aria-pressed', String(isOn));
    b.onclick=()=>{
      if(single){
        // store directly
        arr = mapOut(v);
      }else{
        const val = mapOut(v);
        const i=(arr||[]).indexOf(val);
        if(i>=0) arr.splice(i,1); else (arr||[]).push(val);
      }
      render(); // re-render topic panel
      updateJSON(); refreshBadges();
    };
    container.appendChild(b);
  });
  return arr;
}

/* Topic renderers */
function openTopic(id){
  const p = $('#panel'); p.hidden = false; p.innerHTML = '';
  const h = (title, content)=>{ p.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:8px">
    <strong>${title}</strong>
    <button class="btn slim alt" id="doneTopic">Done</button>
  </div>`; p.appendChild(content); $('#doneTopic').onclick=()=>{ clearPanel(); refreshBadges(); }; };

  let box = document.createElement('div');

  switch(id){
    case 'goals':{
      const chips=document.createElement('div'); chips.className='chips';
      state.goals = chipField(chips, state.goals, PRESETS.goals);
      const add=document.createElement('input'); add.placeholder='Add goal (Enter)';
      add.onkeydown=e=>{ if(e.key==='Enter'){ e.preventDefault(); const v=add.value.trim().toLowerCase(); if(v && !state.goals.includes(v)){ state.goals.push(v); openTopic('goals'); updateJSON(); refreshBadges(); } } };
      box.appendChild(chips); box.appendChild(add); h('Goals', box); break;
    }
    case 'diet':{
      const chips=document.createElement('div'); chips.className='chips';
      // single-select diet
      chipField(chips, state.dietary.dietStyle, PRESETS.diet, true, v=>v);
      chips.onclick=e=>{
        const v=e.target.textContent;
        if(PRESETS.diet.includes(v)){ state.dietary.dietStyle=v; updateJSON(); refreshBadges(); openTopic('diet'); }
      };
      box.appendChild(chips); h('Diet style', box); break;
    }
    case 'allergies':{
      const chips=document.createElement('div'); chips.className='chips';
      state.dietary.allergies = chipField(chips, state.dietary.allergies, PRESETS.allergies);
      const add=document.createElement('input'); add.placeholder='Add allergy (Enter)';
      add.onkeydown=e=>{ if(e.key==='Enter'){ e.preventDefault(); const v=add.value.trim().toLowerCase(); if(v && !state.dietary.allergies.includes(v)){ state.dietary.allergies.push(v); openTopic('allergies'); updateJSON(); } } };
      box.appendChild(chips); box.appendChild(add); h('Allergies', box); break;
    }
    case 'avoid':{
      const chips=document.createElement('div'); chips.className='chips';
      state.dietary.avoid = chipField(chips, state.dietary.avoid, PRESETS.avoid);
      const add=document.createElement('input'); add.placeholder='Add â€œnever showâ€ (Enter)';
      add.onkeydown=e=>{ if(e.key==='Enter'){ e.preventDefault(); const v=add.value.trim().toLowerCase(); if(v && !state.dietary.avoid.includes(v)){ state.dietary.avoid.push(v); openTopic('avoid'); updateJSON(); } } };
      box.appendChild(chips); box.appendChild(add); h('Never show', box); break;
    }
    case 'must':{
      const chips=document.createElement('div'); chips.className='chips';
      state.dietary.mustInclude = chipField(chips, state.dietary.mustInclude, PRESETS.must);
      const add=document.createElement('input'); add.placeholder='Add must-include (Enter)';
      add.onkeydown=e=>{ if(e.key==='Enter'){ e.preventDefault(); const v=add.value.trim().toLowerCase(); if(v && !state.dietary.mustInclude.includes(v)){ state.dietary.mustInclude.push(v); openTopic('must'); updateJSON(); } } };
      box.appendChild(chips); box.appendChild(add); h('Must include', box); break;
    }
    case 'time':{
      const chips=document.createElement('div'); chips.className='chips';
      PRESETS.timeOpts.forEach(o=>{
        const b=document.createElement('button'); b.type='button'; b.className='chip'; b.textContent=o.label;
        b.setAttribute('aria-pressed', String(state.mealRules.timePerDinnerMin===o.val));
        b.onclick=()=>{ state.mealRules.timePerDinnerMin=o.val; openTopic('time'); updateJSON(); refreshBadges(); };
        chips.appendChild(b);
      });
      box.appendChild(chips); h('Time per dinner', box); break;
    }
    case 'variety':{
      const slider=document.createElement('div');
      slider.innerHTML=`<input id="var" type="range" min="0" max="10" value="${state.mealRules.varietyLevel}" />
                        <div class="sl">Variety: <span id="vo">${state.mealRules.varietyLevel}</span>/10</div>`;
      slider.querySelector('#var').oninput=e=>{ state.mealRules.varietyLevel=+e.target.value; slider.querySelector('#vo').textContent=e.target.value; updateJSON(); refreshBadges(); };
      box.appendChild(slider); h('Variety vs repetition', box); break;
    }
    case 'skill':{
      const chips=document.createElement('div'); chips.className='chips';
      PRESETS.skill.forEach(v=>{
        const b=document.createElement('button'); b.className='chip'; b.textContent=v;
        b.setAttribute('aria-pressed', String(state.skillBudget.skillLevel===v));
        b.onclick=()=>{ state.skillBudget.skillLevel=v; openTopic('skill'); updateJSON(); refreshBadges(); };
        chips.appendChild(b);
      });
      box.appendChild(chips); h('Cooking skill', box); break;
    }
    case 'budget':{
      const chips=document.createElement('div'); chips.className='chips';
      PRESETS.budget.forEach(v=>{
        const b=document.createElement('button'); b.className='chip'; b.textContent=v;
        b.setAttribute('aria-pressed', String(state.skillBudget.budgetLevel===v));
        b.onclick=()=>{ state.skillBudget.budgetLevel=v; openTopic('budget'); updateJSON(); refreshBadges(); };
        chips.appendChild(b);
      });
      box.appendChild(chips); h('Budget', box); break;
    }
    case 'leftovers':{
      const chips=document.createElement('div'); chips.className='chips';
      PRESETS.leftovers.forEach(v=>{
        const b=document.createElement('button'); b.className='chip'; b.textContent=v;
        b.setAttribute('aria-pressed', String(state.mealRules.leftoversPolicy===v));
        b.onclick=()=>{ state.mealRules.leftoversPolicy=v; openTopic('leftovers'); updateJSON(); refreshBadges(); };
        chips.appendChild(b);
      });
      box.appendChild(chips); h('Leftovers policy', box); break;
    }
    case 'servings':{
      const chips=document.createElement('div'); chips.className='chips';
      PRESETS.servings.forEach(v=>{
        const b=document.createElement('button'); b.className='chip'; b.textContent=v;
        b.setAttribute('aria-pressed', String(state.mealRules.servingsPerRecipe===+v));
        b.onclick=()=>{ state.mealRules.servingsPerRecipe=+v; openTopic('servings'); updateJSON(); refreshBadges(); };
        chips.appendChild(b);
      });
      box.appendChild(chips); h('Servings per recipe', box); break;
    }
    case 'cuisines':{
      const chips=document.createElement('div'); chips.className='chips';
      state.taste.cuisines = chipField(chips, state.taste.cuisines, PRESETS.cuisines);
      const add=document.createElement('input'); add.placeholder='Add cuisine (Enter)';
      add.onkeydown=e=>{ if(e.key==='Enter'){ e.preventDefault(); const v=add.value.trim().toLowerCase(); if(v && !state.taste.cuisines.includes(v)){ state.taste.cuisines.push(v); openTopic('cuisines'); updateJSON(); } } };
      box.appendChild(chips); box.appendChild(add); h('Cuisines', box); break;
    }
    case 'spice':{
      const slider=document.createElement('div');
      slider.innerHTML=`<input id="sp" type="range" min="0" max="10" value="${state.taste.spiceTolerance}" />
                        <div class="sl">Spice: <span id="so">${state.taste.spiceTolerance}</span>/10</div>`;
      slider.querySelector('#sp').oninput=e=>{ state.taste.spiceTolerance=+e.target.value; slider.querySelector('#so').textContent=e.target.value; updateJSON(); refreshBadges(); };
      box.appendChild(slider); h('Spice tolerance', box); break;
    }
    case 'dessert':{
      const chips=document.createElement('div'); chips.className='chips';
      ['allow','no'].forEach(v=>{
        const b=document.createElement('button'); b.className='chip'; b.textContent=(v==='allow'?'Allow sometimes':'No desserts');
        b.setAttribute('aria-pressed', String( (state.taste.allowDesserts && v==='allow') || (!state.taste.allowDesserts && v==='no') ));
        b.onclick=()=>{ state.taste.allowDesserts = (v==='allow'); openTopic('dessert'); updateJSON(); refreshBadges(); };
        chips.appendChild(b);
      });
      box.appendChild(chips); h('Desserts', box); break;
    }
    case 'proteins':{
      const chips=document.createElement('div'); chips.className='chips';
      state.taste.proteinPrefs = chipField(chips, state.taste.proteinPrefs, PRESETS.proteins);
      const add=document.createElement('input'); add.placeholder='Add protein (Enter)';
      add.onkeydown=e=>{ if(e.key==='Enter'){ e.preventDefault(); const v=add.value.trim().toLowerCase(); if(v && !state.taste.proteinPrefs.includes(v)){ state.taste.proteinPrefs.push(v); openTopic('proteins'); updateJSON(); } } };
      box.appendChild(chips); box.appendChild(add); h('Preferred proteins', box); break;
    }
    case 'equipment':{
      const chips=document.createElement('div'); chips.className='chips';
      state.skillBudget.equipment = chipField(chips, state.skillBudget.equipment, PRESETS.equipment);
      const add=document.createElement('input'); add.placeholder='Add equipment (Enter)';
      add.onkeydown=e=>{ if(e.key==='Enter'){ e.preventDefault(); const v=add.value.trim().toLowerCase(); if(v && !state.skillBudget.equipment.includes(v)){ state.skillBudget.equipment.push(v); openTopic('equipment'); updateJSON(); } } };
      box.appendChild(chips); box.appendChild(add); h('Equipment', box); break;
    }
  }
  updateJSON();
}
function clearPanel(){ const p=$('#panel'); p.hidden=true; p.innerHTML=''; }
$('#clearPanel').onclick = clearPanel;
$('#finish').onclick = ()=>{ state.meta.savedAt=new Date().toISOString(); updateJSON(); alert('Preferences ready (demo).'); };

/* keep JSON in sync with quick note live */
$('#quickNote').addEventListener('input', e=>{ state.quickNote=e.target.value.trim(); updateJSON(); });

/* Init */
updateJSON();
</script>
</body>
</html>
